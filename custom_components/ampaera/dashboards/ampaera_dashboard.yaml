# Ampæra Energy Dashboard Template
# Auto-generated by the Ampæra integration
# {site_name} ({site_id})

title: "Ampæra Energy"
icon: mdi:lightning-bolt

views:
  # Overview Tab - Main dashboard with key metrics
  - title: "Overview"
    path: overview
    icon: mdi:home-lightning-bolt
    type: sections
    max_columns: 3
    cards:
      # Real-time Power Gauge
      - type: gauge
        entity: sensor.{site_id}_power
        name: "Current Power"
        min: 0
        max: 15000
        severity:
          green: 0
          yellow: 5000
          red: 10000
        needle: true
        unit: "W"

      # Today's Stats
      - type: glance
        title: "Today's Usage"
        entities:
          - entity: sensor.{site_id}_energy_today
            name: "Energy"
          - entity: sensor.{site_id}_cost_today
            name: "Cost"
          - entity: sensor.{site_id}_spot_price
            name: "Spot Price"

      # Power History Graph
      - type: history-graph
        title: "Power History"
        hours_to_show: 24
        entities:
          - entity: sensor.{site_id}_power
            name: "Power"

      # Current Price Card
      - type: entities
        title: "Electricity Prices"
        entities:
          - entity: sensor.{site_id}_spot_price
            name: "Current Spot Price"
          - entity: sensor.{site_id}_price_level
            name: "Price Level"

  # Devices Tab - Controllable devices
  - title: "Devices"
    path: devices
    icon: mdi:devices
    type: sections
    max_columns: 2
    cards:
      # Water Heater Control (if available)
      - type: conditional
        conditions:
          - entity: water_heater.{site_id}_water_heater
            state_not: unavailable
        card:
          type: thermostat
          entity: water_heater.{site_id}_water_heater
          name: "Water Heater"
          features:
            - type: target-temperature
            - type: water-heater-operation-modes

      # Device List
      - type: entities
        title: "Connected Devices"
        show_header_toggle: false
        entities:
          - entity: sensor.{site_id}_device_count
            name: "Total Devices"
            icon: mdi:counter

  # Energy Tab - Detailed energy analysis
  - title: "Energy"
    path: energy
    icon: mdi:flash
    type: sections
    max_columns: 2
    cards:
      # Daily Energy Graph
      - type: statistics-graph
        title: "Daily Energy Usage"
        chart_type: bar
        period: day
        days_to_show: 7
        entities:
          - entity: sensor.{site_id}_energy_today
            name: "Energy"

      # Phase Voltages (if available)
      - type: conditional
        conditions:
          - entity: sensor.{site_id}_voltage_l1
            state_not: unavailable
        card:
          type: entities
          title: "Phase Voltages"
          entities:
            - entity: sensor.{site_id}_voltage_l1
              name: "Phase L1"
            - entity: sensor.{site_id}_voltage_l2
              name: "Phase L2"
            - entity: sensor.{site_id}_voltage_l3
              name: "Phase L3"

      # Phase Currents (if available)
      - type: conditional
        conditions:
          - entity: sensor.{site_id}_current_l1
            state_not: unavailable
        card:
          type: entities
          title: "Phase Currents"
          entities:
            - entity: sensor.{site_id}_current_l1
              name: "Phase L1"
            - entity: sensor.{site_id}_current_l2
              name: "Phase L2"
            - entity: sensor.{site_id}_current_l3
              name: "Phase L3"

  # Prices Tab - Spot prices and forecasts
  - title: "Prices"
    path: prices
    icon: mdi:currency-usd
    type: sections
    max_columns: 2
    cards:
      # Today's Prices
      - type: custom:apexcharts-card
        header:
          title: "Today's Spot Prices"
          show: true
        chart_type: line
        span:
          start: day
        series:
          - entity: sensor.{site_id}_spot_price
            type: line
            stroke_width: 2
            color: rgb(66, 165, 245)

      # Price Statistics
      - type: entities
        title: "Price Summary"
        entities:
          - entity: sensor.{site_id}_price_average_today
            name: "Today's Average"
          - entity: sensor.{site_id}_price_min_today
            name: "Today's Minimum"
          - entity: sensor.{site_id}_price_max_today
            name: "Today's Maximum"

  # Diagnostics Tab - System health
  - title: "Diagnostics"
    path: diagnostics
    icon: mdi:wrench
    type: sections
    max_columns: 2
    cards:
      # Connection Status
      - type: entities
        title: "Integration Status"
        entities:
          - entity: sensor.{site_id}_last_update
            name: "Last Update"
          - entity: sensor.{site_id}_connection_status
            name: "Connection"

      # System Info
      - type: markdown
        title: "Ampæra Integration"
        content: |
          **Site:** {site_name}
          **Site ID:** {site_id}
          **Grid Region:** {grid_region}

          [Open Ampæra Dashboard](https://ampæra.no/dashboard)
