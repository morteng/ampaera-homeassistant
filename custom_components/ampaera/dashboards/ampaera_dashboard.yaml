# Ampæra Energy Dashboard Template
# Auto-generated by the Ampæra integration
# Site: {site_name} (ID: {site_id})
#
# Entity IDs use slugified site name: sensor.{site_name_slug}_*

title: "Ampæra - {site_name}"
icon: mdi:lightning-bolt

views:
  # Overview Tab - Main dashboard with key metrics
  - title: "Oversikt"
    path: overview
    icon: mdi:home-lightning-bolt
    cards:
      # Real-time Power Gauge
      - type: gauge
        entity: sensor.{site_name_slug}_power
        name: "Nåværende effekt"
        min: 0
        max: 15000
        severity:
          green: 0
          yellow: 5000
          red: 10000
        needle: true
        unit: "W"

      # Today's Stats
      - type: glance
        title: "I dag"
        entities:
          - entity: sensor.{site_name_slug}_energy_today
            name: "Energi"
          - entity: sensor.{site_name_slug}_cost_today
            name: "Kostnad"
          - entity: sensor.{site_name_slug}_spot_price
            name: "Spotpris"

      # Power History Graph (native HA card)
      - type: history-graph
        title: "Effekthistorikk"
        hours_to_show: 24
        entities:
          - entity: sensor.{site_name_slug}_power
            name: "Effekt"

      # Current Price Card
      - type: entities
        title: "Strømpriser"
        entities:
          - entity: sensor.{site_name_slug}_spot_price
            name: "Spotpris nå"

  # Energy Tab - Detailed energy analysis
  - title: "Energi"
    path: energy
    icon: mdi:flash
    cards:
      # Energy stats
      - type: statistic
        entity: sensor.{site_name_slug}_energy_today
        name: "Energi i dag"
        period:
          calendar:
            period: day

      # Cost stats
      - type: statistic
        entity: sensor.{site_name_slug}_cost_today
        name: "Kostnad i dag"
        period:
          calendar:
            period: day

      # Phase Voltages (if available - uses conditional)
      - type: conditional
        conditions:
          - condition: state
            entity: sensor.{site_name_slug}_voltage_l1
            state_not: unavailable
        card:
          type: entities
          title: "Fasespenninger"
          entities:
            - entity: sensor.{site_name_slug}_voltage_l1
              name: "Fase L1"
            - entity: sensor.{site_name_slug}_voltage_l2
              name: "Fase L2"
            - entity: sensor.{site_name_slug}_voltage_l3
              name: "Fase L3"

      # Phase Currents (if available)
      - type: conditional
        conditions:
          - condition: state
            entity: sensor.{site_name_slug}_current_l1
            state_not: unavailable
        card:
          type: entities
          title: "Fasestrømmer"
          entities:
            - entity: sensor.{site_name_slug}_current_l1
              name: "Fase L1"
            - entity: sensor.{site_name_slug}_current_l2
              name: "Fase L2"
            - entity: sensor.{site_name_slug}_current_l3
              name: "Fase L3"

  # Devices Tab - Controllable devices
  - title: "Enheter"
    path: devices
    icon: mdi:devices
    cards:
      # Water Heater Control (if available)
      - type: conditional
        conditions:
          - condition: state
            entity: water_heater.{site_name_slug}_water_heater
            state_not: unavailable
        card:
          type: thermostat
          entity: water_heater.{site_name_slug}_water_heater
          name: "Varmtvannsbereder"

      # Placeholder when no devices
      - type: markdown
        title: "Tilkoblede enheter"
        content: |
          Enheter som er synkronisert med Ampæra vises her.

          For å legge til enheter, gå til **Innstillinger** → **Integrasjoner** → **Ampæra** → **Konfigurer**.

  # Info Tab - System info
  - title: "Info"
    path: info
    icon: mdi:information
    cards:
      # System Info
      - type: markdown
        title: "Ampæra-integrasjon"
        content: |
          **Sted:** {site_name}
          **Site ID:** {site_id}
          **Strømregion:** {grid_region}

          [Åpne Ampæra Dashboard](https://ampæra.no/dashboard)
